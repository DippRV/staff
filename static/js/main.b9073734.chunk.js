(this.webpackJsonpstaff=this.webpackJsonpstaff||[]).push([[0],{334:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(15),a=n.n(c),o=n(9),i=n.n(o),s=n(16),l=n(22),j=n(383),u=n(380),b=n(375),d=n(382),m=n(30),f=n(12),p=n(21),O="GET_STAFF",x="ADD_EMPLOYEE",h="DELETE_EMPLOYEE",y="UPDATE_EMPLOYEE",v="SELECT_EMPLOYEE",g={staff:[],selectedEmployee:null},E=function(e){return{type:O,staff:e}},w=function(e){return{type:v,employee:e}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(p.a)(Object(p.a)({},e),{},{staff:t.staff});case x:return Object(p.a)(Object(p.a)({},e),{},{staff:[].concat(Object(f.a)(e.staff),[t.employee])});case h:return Object(p.a)(Object(p.a)({},e),{},{staff:e.staff.filter((function(e){return e.id!==t.employee.id}))});case y:return Object(p.a)(Object(p.a)({},e),{},{staff:e.staff.map((function(e){return e.id===t.employee.id?t.employee:e}))});case v:return!t.employee||e.selectedEmployee&&e.selectedEmployee.id===t.employee.id?Object(p.a)(Object(p.a)({},e),{},{selectedEmployee:null}):Object(p.a)(Object(p.a)({},e),{},{selectedEmployee:t.employee});default:return e}},k=n(66),C=n.n(k),D="https://my-json-server.typicode.com/DippRV/staff-db/staff",G=function(e){return D+"/".concat(e.id,"/")},F={Get:function(){return C.a.get(D).then((function(e){return e.data})).catch((function(){return null}))},Add:function(e){return C.a.post(D,e).then((function(e){return e.data})).catch((function(){return null}))},Delete:function(e){return C.a.delete(G(e)).then((function(e){return e.data})).catch((function(){return null}))},Update:function(e){return C.a.put(G(e),e).then((function(e){return e.data})).catch((function(){return null}))},GetPositions:function(){return C.a.get("https://my-json-server.typicode.com/DippRV/staff-db/positions").then((function(e){return e.data})).catch((function(){return null}))}},P=n(19),L=n(47),N={EmployeeSchema:L.c().shape({id:L.b(),date:L.d(),name:L.d().required("Required"),position:L.d().required("Required"),sex:L.d(),fired:L.a()}),GetEmptyEmployeeData:function(){return{id:0,name:"",date:"",position:"",sex:"",fired:!1}}},M=n(102),I=n(100),T=n.n(I),V=n(378),A=n(379),R=n(103),_=n(395),q=n(3),Y=["control","name","label","error"],U=function(e){var t=e.control,n=e.name,r=e.label,c=e.error,a=void 0===c?null:c,o=Object(R.a)(e,Y);return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(P.a,{name:n,control:t,render:function(e){var t=e.field,c=t.onChange,a=t.value;return Object(q.jsx)(_.a,Object(p.a)({id:n,label:r,onChange:c,value:a},o))}}),a?Object(q.jsx)("p",{children:a.message}):null]})},J=n(397),W=n(374),B=n(373),z=n(390),H=["control","name","label","error","positions"],K=function(e){var t=e.control,n=e.name,r=e.label,c=e.error,a=void 0===c?null:c,o=e.positions,i=Object(R.a)(e,H);return Object(q.jsxs)(B.a,{children:[Object(q.jsx)(W.a,{id:r,children:r}),Object(q.jsx)(P.a,{control:t,name:n,render:function(e){var t=e.field,c=t.onChange,a=t.value;return Object(q.jsxs)(z.a,Object(p.a)(Object(p.a)({labelId:r,id:n,onChange:c,value:a},i),{},{children:[Object(q.jsxs)(J.a,{value:"",children:["Select ",n]}),null===o||void 0===o?void 0:o.map((function(e){return Object(q.jsx)(J.a,{value:e,children:e},e)}))]}))}}),a?Object(q.jsx)("p",{children:a.message}):null]})},Q=n(338),X=n(377),Z=n(392),$=n(398),ee=function(e){var t=e.label,n=e.control,r=e.name,c=e.options;return Object(q.jsxs)(B.a,{children:[Object(q.jsx)(Q.a,{children:t}),Object(q.jsx)(P.a,{control:n,name:r,render:function(e){var t=e.field,n=t.onChange,r=t.value;return Object(q.jsx)($.a,{row:!0,onChange:n,value:r,children:null===c||void 0===c?void 0:c.map((function(e){return Object(q.jsx)(X.a,{value:e.value,label:e.key,control:Object(q.jsx)(Z.a,{})},e.key)}))})}})]})},te=n(376),ne=n(393),re=function(e){var t=e.control,n=e.name,r=e.label;return Object(q.jsx)(B.a,{children:Object(q.jsx)(te.a,{row:!0,children:Object(q.jsx)(X.a,{control:Object(q.jsx)(P.a,{name:n,control:t,render:function(e){var t=e.field,n=t.onChange,r=t.value;return Object(q.jsx)(ne.a,{color:"primary",onChange:n,checked:r})}}),label:r,labelPlacement:"start"})})})},ce=n(381),ae=n(394),oe=T()((function(e){return{root:{flexGrow:1,"& .MuiFormControl-root":{margin:e.spacing(1),width:"100%"}}}})),ie=function(e){var t=e.control,n=e.handleSubmit,r=e.onSubmit,c=e.errors,a=e.openForm,o=e.closeForm,i=e.sexOptions,s=e.positions,l=oe();return Object(q.jsxs)(ae.a,{open:a,onClose:o,"aria-labelledby":"form-dialog-title",children:[Object(q.jsx)(V.a,{id:"form-dialog-title",children:"New employee"}),Object(q.jsx)(A.a,{style:{overflow:"hidden"},className:l.root,children:Object(q.jsxs)("form",{onSubmit:n(r),children:[Object(q.jsxs)(u.a,{alignItems:"flex-end",container:!0,item:!0,sm:12,spacing:3,children:[Object(q.jsx)(u.a,{item:!0,sm:6,children:Object(q.jsx)(U,{error:c.name,label:"\u0424\u0418\u041e",name:"name",control:t})}),Object(q.jsx)(u.a,{item:!0,sm:6,children:Object(q.jsx)(U,{label:"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f",name:"date",type:"date",control:t,InputLabelProps:{shrink:!0}})}),Object(q.jsx)(u.a,{item:!0,sm:12,children:Object(q.jsx)(K,{error:c.position,control:t,name:"position",label:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",positions:s})}),Object(q.jsx)(u.a,{item:!0,sm:6,children:Object(q.jsx)(ee,{control:t,label:"\u041f\u043e\u043b",name:"sex",options:i})}),Object(q.jsx)(u.a,{item:!0,sm:2,children:Object(q.jsx)(re,{control:t,label:"\u0423\u0432\u043e\u043b\u0435\u043d",name:"fired"})})]}),Object(q.jsxs)(ce.a,{children:[Object(q.jsx)(d.a,{onClick:o,color:"primary",children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"}),Object(q.jsx)(d.a,{color:"primary",type:"submit",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})]})})]})},se=T()((function(e){return{button:{margin:"5px"}}})),le=function(e){var t=e.positions,n=e.sexOptions,c=se(),a=Object(m.c)((function(e){return e.staff.selectedEmployee})),o=Object(m.b)(),j=Object(r.useState)(!1),b=Object(l.a)(j,2),f=b[0],p=b[1],O=function(){p((function(e){return!e}))},y=Object(P.e)({defaultValues:N.GetEmptyEmployeeData(),resolver:Object(M.a)(N.EmployeeSchema)}),v=y.handleSubmit,g=y.control,E=y.formState.errors,S=y.reset;return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)(u.a,{container:!0,item:!0,sm:12,spacing:3,children:[Object(q.jsx)(d.a,{className:c.button,variant:"contained",color:"primary",onClick:O,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),Object(q.jsx)(d.a,{className:c.button,variant:"contained","color-":"primary",disabled:!a,onClick:function(){o(function(e){return function(t){Object(s.a)(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,F.Delete(e);case 2:n.sent&&(t({type:h,employee:e}),t(w(null)));case 4:case"end":return n.stop()}}),n)})))()}}(a))},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]}),Object(q.jsx)(ie,{control:g,errors:E,sexOptions:n,handleSubmit:v,onSubmit:function(e){Object(s.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.Add(e);case 2:(n=t.sent)&&(o({type:x,employee:n}),S());case 4:case"end":return t.stop()}}),t)})))()},positions:t,closeForm:function(){S(),O()},openForm:f})]})},je=n(385),ue=n(386),be=n(387),de=n(388),me=n(389),fe=n(384),pe=Object(j.a)((function(e){return{table:{minWidth:650}}})),Oe=function(e){var t=e.staff,n=e.selectedEmployee,r=e.SelectEmployee,c=pe();return Object(q.jsx)(fe.a,{component:b.a,children:Object(q.jsxs)(je.a,{className:c.table,"aria-label":"simple table",children:[Object(q.jsx)(ue.a,{children:Object(q.jsxs)(be.a,{children:[Object(q.jsx)(de.a,{children:"\u0424\u0418\u041e"}),Object(q.jsx)(de.a,{align:"right",children:"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f"}),Object(q.jsx)(de.a,{align:"right",children:"\u041f\u043e\u043b"}),Object(q.jsx)(de.a,{align:"right",children:"\u0423\u0432\u043e\u043b\u0435\u043d"}),Object(q.jsx)(de.a,{align:"right",children:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c"})]})}),Object(q.jsx)(me.a,{children:t?t.map((function(e){return Object(q.jsxs)(be.a,{selected:n&&n.id===e.id,onClick:r(e),children:[Object(q.jsx)(de.a,{component:"th",scope:"row",children:e.name}),Object(q.jsx)(de.a,{align:"right",children:e.date}),Object(q.jsx)(de.a,{align:"right",children:e.sex}),Object(q.jsx)(de.a,{align:"right",children:e.fired?"\u0414\u0430":"\u041d\u0435\u0442"}),Object(q.jsx)(de.a,{align:"right",children:e.position})]},e.id)})):null})]})})},xe=function(){var e=Object(m.c)((function(e){return e.staff})),t=e.staff,n=e.selectedEmployee,c=Object(m.b)();return Object(r.useEffect)((function(){try{c((function(e){Object(s.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.t1=E,t.next=4,F.Get();case 4:t.t2=t.sent,t.t3=(0,t.t1)(t.t2),(0,t.t0)(t.t3);case 7:case"end":return t.stop()}}),t)})))()}))}catch(e){console.log("Server Error")}}),[c]),Object(q.jsx)(Oe,{staff:t,selectedEmployee:n,SelectEmployee:function(e){return function(){c(w(e))}}})},he=function(e){var t=e.control,n=e.positions,r=e.sexOptions,c=e.selectedEmployee,a=e.errors,o=e.handleSubmit,i=e.onSubmit;return Object(q.jsx)("form",{onSubmit:o(i),children:Object(q.jsxs)(u.a,{alignItems:"flex-end",container:!0,item:!0,sm:12,spacing:3,children:[Object(q.jsx)(u.a,{item:!0,sm:6,children:Object(q.jsx)(U,{error:a.name,label:"\u0424\u0418\u041e",name:"name",control:t})}),Object(q.jsx)(u.a,{item:!0,sm:6,children:Object(q.jsx)(U,{label:"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f",name:"date",type:"date",control:t,InputLabelProps:{shrink:!0}})}),Object(q.jsx)(u.a,{item:!0,sm:12,children:Object(q.jsx)(K,{error:a.position,control:t,name:"position",label:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c",positions:n})}),Object(q.jsx)(u.a,{item:!0,sm:6,children:Object(q.jsx)(ee,{control:t,label:"\u041f\u043e\u043b",name:"sex",options:r})}),Object(q.jsx)(u.a,{item:!0,sm:2,children:Object(q.jsx)(re,{control:t,label:"\u0423\u0432\u043e\u043b\u0435\u043d",name:"fired"})}),Object(q.jsx)(u.a,{item:!0,sm:12,children:Object(q.jsx)(d.a,{variant:"contained",color:"primary",type:"submit",disabled:!c,children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"})})]})})},ye=function(e){var t=e.positions,n=e.sexOptions,c=Object(m.b)(),a=Object(m.c)((function(e){return e.staff.selectedEmployee})),o=Object(P.e)({defaultValues:N.GetEmptyEmployeeData(),resolver:Object(M.a)(N.EmployeeSchema)}),l=o.handleSubmit,j=o.setValue,u=o.getValues,b=o.control,d=o.formState.errors,f=Object(r.useCallback)((function(e){j("id",e.id),j("name",e.name),j("date",e.date),j("position",e.position),j("sex",e.sex),j("fired",e.fired)}),[j]);return Object(r.useEffect)((function(){Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=5;break}return e.next=3,f(a);case 3:e.next=7;break;case 5:return e.next=7,f(N.GetEmptyEmployeeData());case 7:case"end":return e.stop()}}),e)})))()}),[a,j,f,u]),Object(q.jsx)(he,{control:b,onSubmit:function(e){Object(s.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.Update(e);case 2:(n=t.sent)&&c({type:y,employee:n});case 4:case"end":return t.stop()}}),t)})))()},handleSubmit:l,errors:d,sexOptions:n,positions:t,selectedEmployee:a})},ve=Object(j.a)((function(e){return{root:{flexGrow:1,"& .MuiFormControl-root":{margin:e.spacing(1),width:"100%"}},paper:{padding:e.spacing(2),color:e.palette.text.secondary,width:"100%"}}})),ge=[{key:"\u0416\u0435\u043d\u0441\u043a\u0438\u0439",value:"female"},{key:"\u041c\u0443\u0436\u0441\u043a\u043e\u0439",value:"male"}],Ee=function(){var e=ve(),t=Object(r.useState)(null),n=Object(l.a)(t,2),c=n[0],a=n[1];return Object(r.useEffect)((function(){Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.GetPositions();case 2:(t=e.sent)&&a((function(e){return t}));case 4:case"end":return e.stop()}}),e)})))()}),[]),Object(q.jsx)("div",{className:e.root,children:Object(q.jsxs)(u.a,{container:!0,spacing:3,children:[Object(q.jsx)(u.a,{item:!0,xs:12,children:Object(q.jsx)(b.a,{className:e.paper,children:Object(q.jsx)(le,{positions:c,sexOptions:ge})})}),Object(q.jsx)(u.a,{item:!0,sm:6,children:Object(q.jsx)(xe,{})}),Object(q.jsx)(u.a,{container:!0,item:!0,sm:6,children:Object(q.jsx)(b.a,{className:e.paper,children:Object(q.jsx)(ye,{positions:c,sexOptions:ge})})})]})})},we=function(){return Object(q.jsx)(Ee,{})},Se=n(77),ke=n(168),Ce=n(169),De=Object(Se.combineReducers)({staff:S}),Ge=Object(Se.createStore)(De,Object(ke.composeWithDevTools)(Object(Se.applyMiddleware)(Ce.a)));a.a.render(Object(q.jsx)(m.a,{store:Ge,children:Object(q.jsx)(we,{})}),document.getElementById("root"))}},[[334,1,2]]]);
//# sourceMappingURL=main.b9073734.chunk.js.map